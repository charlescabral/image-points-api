"use strict";!function(t){var i=function(t,i,e){return Math.abs(1-Math.abs(t/i))<e},e=function(e,n,o,s,a){this.x=e,this.y=n,this.text=o,this.align=s,this.radius=24,void 0!=a&&(this.x=this.x*this.align.x/t(a).width(),this.y=this.y*this.align.y/t(a).height()),this.relativeX=function(i){return this.x*t(i).width()/this.align.x},this.relativeY=function(i){return this.y*t(i).height()/this.align.y},this.render=function(t,i){t.beginPath(),t.arc(this.relativeX(i),this.relativeY(i),4,0,2*Math.PI,!0),t.fill()},this.isMe=function(e,n,o,s){return s=s||.01,void 0!=o&&(e=e*this.align.x/t(o).width(),n=n*this.align.y/t(o).height()),i(e,this.x,s)&&i(n,this.y,s)}};t.fn.dots=function(i,n){var o=t.extend({img:"",setmode:!1,setcallback:function(t){},defaulttext:"New Item",forceRatio:!1,align:{x:770,y:566}},n);o.dots=[],t.each(i,function(t,i){o.dots.push(new e(i.x,i.y,i.text,o.align))});var s=t("<div/>").appendTo("body").addClass("hoverDotTooltip").css({backgroundColor:"white",border:"1px solid transparent",position:"absolute",padding:"5px",marginLeft:"-50px"}).hide(),a=[],r=function(i,e,n,a){for(var r=parseInt(i.clientX-n+t(window).scrollLeft()),h=parseInt(i.clientY-a+t(window).scrollTop()),l=!1,c=0;c<o.dots.length;c++){var d=o.dots[c],f=r-d.relativeX(e),u=h-d.relativeY(e);f*f+u*u<d.radius&&(s.get(0).style.top=d.relativeY(e)-40+a+"px",s.get(0).style.left=d.relativeX(e)+n+"px",s.html(d.text),l=!0)}l?(s.show(),s.get(0).style.marginLeft=-s.width()/2+3+"px"):s.hide()},h=function(){t.each(a,function(i,e){t.each(o.dots,function(t,i){i.render(e.ctx,e.el)})})};return this.removeDot=function(t,i){o.dots=o.dots.filter(function(n,o){return e.x!=t&&e.y!=i})},this.each(function(i,n){n.style="background: url("+o.img+");background-repeat: no-repeat; background-size: 100% 100%;width: "+o.width+"; ";var s=t(n);a.push({el:n,ctx:n.getContext("2d")}),s.mousemove(function(t){r(t,n,n.offsetLeft,n.offsetTop)}),o.setmode&&s.click(function(i){var s,a,r;a=n,r=new e((s=i).clientX-a.offsetLeft,s.clientY-a.offsetTop+t(window).scrollTop(),o.defaulttext,o.align,a),o.dots.push(r),h(),o.setcallback(r)}),s.resize(function(t){isNumeric(o.forceRatio)&&s.height(s.width()*o.forceRatio),h()})}),h(),this}}(jQuery);